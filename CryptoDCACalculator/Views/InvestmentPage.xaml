<?xml version="1.0" encoding="utf-8" ?>

<bases:BaseContentPage x:Class="CryptoDCACalculator.Views.InvestmentPage"
                       xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
                       xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                       xmlns:bases="clr-namespace:CryptoDCACalculator.Views.Bases"
                       xmlns:controls="clr-namespace:CryptoDCACalculator.Controls"
                       xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
                       xmlns:viewModels="clr-namespace:CryptoDCACalculator.ViewModels"
                       Title="{Binding Title}"
                       x:DataType="viewModels:InvestmentViewModel"
                       x:TypeArguments="viewModels:InvestmentViewModel"
                       BackgroundColor="{StaticResource Secondary}">

    <ContentPage.Resources>
        <toolkit:IsNotNullConverter x:Key="IsNotNullConverter" />
    </ContentPage.Resources>

    <Border Margin="20"
            Padding="20"
            BackgroundColor="{StaticResource White}"
            HorizontalOptions="Fill"
            StrokeShape="RoundRectangle 5"
            StrokeThickness="0"
            VerticalOptions="Center">
        <Grid RowDefinitions="Auto, *">
            <VerticalStackLayout Grid.Row="0"
                                 Margin="10"
                                 Spacing="10">

                <controls:CryptoPicker Title="Select Country"
                                       InnerPadding="12,6"
                                       ItemDisplayBinding="{Binding Name}"
                                       ItemsSource="{Binding CryptoCurrencies}"
                                       Placeholder="Crypto Currency"
                                       SelectedItem="{Binding SelectedCryptoCurrency}" />

                <controls:CryptoDatePicker Date="{Binding StartDate}" Placeholder="Start Date" />

                <controls:CryptoEntry Keyboard="Numeric"
                                      Placeholder="Investment Day"
                                      Text="{Binding InvestmentDay, StringFormat='{0:d}'}" />

                <controls:CryptoEntry Keyboard="Numeric"
                                      Placeholder="Monthly Amount"
                                      Text="{Binding MonthlyAmount, StringFormat='{0:d}'}" />
                <Button Margin="0,40,0,0"
                        Command="{Binding SaveCommand}"
                        FontFamily="{StaticResource MontserratSemiboldFontFamily}"
                        Text="Save" />

                <Button Margin="0,10,0,0"
                        BackgroundColor="{StaticResource Red100}"
                        Command="{Binding DeleteCommand}"
                        FontFamily="{StaticResource MontserratSemiboldFontFamily}"
                        IsVisible="{Binding Id, Converter={StaticResource IsNotNullConverter}}"
                        Text="Delete" />
            </VerticalStackLayout>
        </Grid>
    </Border>

</bases:BaseContentPage>
